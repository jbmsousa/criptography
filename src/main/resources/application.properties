# Database Configuration
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=crypto_user
quarkus.datasource.password=crypto_pass
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/secure_messaging

# Flyway handles schema migrations - Hibernate only validates
quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.log.sql=true

# Flyway Configuration
quarkus.flyway.migrate-at-start=true
quarkus.flyway.baseline-on-migrate=true
quarkus.flyway.baseline-version=0
quarkus.flyway.locations=db/migration

# WebSocket Configuration
quarkus.websocket.max-frame-size=65536

# HTTP Configuration
quarkus.http.port=8080
quarkus.http.cors=true
quarkus.http.cors.origins=*

# Static Resources
quarkus.http.enable-compression=true

# Session timeout (30 minutes)
quarkus.http.session.timeout=30M

# Logging
quarkus.log.level=INFO
quarkus.log.category."cv.sousa".level=DEBUG

# Redis Configuration (for session persistence)
quarkus.redis.hosts=redis://localhost:6379
quarkus.redis.timeout=PT10S
quarkus.redis.health.enabled=true

# Session Redis Configuration
session.redis.prefix=securechat:session:
session.redis.ttl=1800

# OpenAPI / Swagger UI
quarkus.smallrye-openapi.path=/openapi
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/swagger-ui
mp.openapi.extensions.smallrye.info.title=SecureChat API
mp.openapi.extensions.smallrye.info.version=1.0.0
mp.openapi.extensions.smallrye.info.description=API para sistema de mensagens seguras com criptografia end-to-end
mp.openapi.extensions.smallrye.info.contact.name=Criptografia Moderna
mp.openapi.extensions.smallrye.info.contact.url=https://github.com/sousa/securechat

# Security Headers
quarkus.http.header."X-Content-Type-Options".value=nosniff
quarkus.http.header."X-Frame-Options".value=SAMEORIGIN
quarkus.http.header."X-XSS-Protection".value=1; mode=block
quarkus.http.header."Referrer-Policy".value=strict-origin-when-cross-origin
#quarkus.http.header."Content-Security-Policy".value=default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; font-src 'self' https://cdn.jsdelivr.net data:; img-src 'self' data: https:; connect-src 'self' ws://localhost:8080 wss://localhost:8080 http://localhost:8080 https://cdn.jsdelivr.net; frame-ancestors 'self'; form-action 'self'; base-uri 'self'
#quarkus.http.header."Content-Security-Policy".value=default-src 'self'; script-src 'self' https://cdn.jsdelivr.net 'sha256-ICeooTkO2J753TOU5+7Jjh8dAzqYmc8YcOfpcqTw33k=' 'sha256-kPx0AsF0oz2kKiZ875xSvv693TBHkQ/0SkMJZnnNpnQ=' 'sha256-FgGo9Upw6OpCWrjZCgzw4GJ0OtDKdPUrfVZDJNBdNu4='; style-src 'self' https://cdn.jsdelivr.net 'unsafe-inline'; font-src 'self' https://cdn.jsdelivr.net data:; img-src 'self' data: https:; connect-src 'self' ws://localhost:8080 wss://localhost:8080 http://localhost:8080 https://cdn.jsdelivr.net; frame-ancestors 'self'; form-action 'self'; base-uri 'self'
quarkus.http.header."Content-Security-Policy".value=default-src 'self'; script-src 'self' https://cdn.jsdelivr.net 'sha256-ICeooTkO2J753TOU5+7Jjh8dAzqYmc8YcOfpcqTw33k=' 'sha256-kPx0AsF0oz2kKiZ875xSvv693TBHkQ/0SkMJZnnNpnQ=' 'sha256-FgGo9Upw6OpCWrjZCgzw4GJ0OtDKdPUrfVZDJNBdNu4=' 'sha256-uS/xax3AU7L42KNc3Q1G3Yca5EuRJpgdDTEcnLJ+GBA=' 'sha256-NwZ/Q/9/rzaURVavJOLxK6/6GG4WcHMNCpz9tH6nsfA='; style-src 'self' https://cdn.jsdelivr.net 'unsafe-inline'; font-src 'self' https://cdn.jsdelivr.net data:; img-src 'self' data: https:; connect-src 'self' ws://localhost:8080 wss://localhost:8080 http://localhost:8080 https://cdn.jsdelivr.net; frame-ancestors 'self'; form-action 'self'; base-uri 'self'